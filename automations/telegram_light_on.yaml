  id: telegram_motion_alert
  alias: Device On Alert
  trigger:
    platform: template
    value_template: >
      {% for state in states.switch %}
        {%- if is_state(state.entity_id, 'on') %}
          true
        {% endif -%}
      {% endfor %}
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: 'device_tracker.brittanys_pixel'
        state: 'away'
      - condition: state
        entity_id: 'device_tracker.calebs_pixel'
        state: 'away'
  action:
    - service_template: "notify.telegram"
      data_template:
        title: '**Alert - Device On**'
        message: >
          {% for state in states.switch %}
            {%- if is_state(state.entity_id, 'on') %}
              "No one is home and a {{ state.entity_id.attributes.friendly_name }} is still on."
            {% endif -%}
          {% endfor %}


    # platform: template
    # value_template: "{% if is_state('device_tracker.calebs_pixel', 'home')%}false{% endif %}"
